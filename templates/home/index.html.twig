{% extends 'base.html.twig' %}


{% block title %}Origins Digital{% endblock %}

{% block body %}
    {% include 'home/video_recommandations.html.twig' %}
    {%  include 'home/video_tendances.html.twig' %}
    {% for video in sortedVideos %}
        {% if not video.Private or app.user %}
            <div class="modal" id="myModal{{ video.id }}">
                <div class="modal-dialog modal-fullscreen">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h3 class="modal-title">{{ video.title }}</h3>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                </div>
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-lg-8">
                                            <video id="main-video-player" class="video-js videoPlayer" controls>
                                                <source id="main-video-source"
                                                        src="{{ video_dir ~ '/' ~ video.videoUrl }}"
                                                        alt="{{ video.title }}" type="video/mp4">
                                            </video>
                                            <h3 id="main-video-title">Titre : {{ video.title }}</h3>
                                            <a id="main-video-like" href="{{ path('add_like', {id: video.id}) }}">Aimer
                                                la video</a>
                                            <a id="main-video-bookmark"
                                               href="{{ path('add_bookmark', {id: video.id}) }}">Mettre en favoris</a>
                                            <div id="main-video-description">
                                                {{ video.description | raw }}
                                            </div>
                                        </div>
                                        <div class="col-lg-4 d-flex flex-column align-items-center">
                                            {% for video in videos|reverse|slice(0, 3) %}
                                                <div class="card mb-2 card bg-transparent border-0" style="width: 70%;">
                                                    <div class="video-container position-relative"
                                                         data-bs-target="#myModal{{ video.id }}" data-bs-toggle="modal">
                                                        {% if video.Private and not app.user %}
                                                            <a href="{{ path('app_login') }}">
                                                                <img
                                                                    src="{{ (image_dir ~ '/' ~ video.image ) | imagine_filter('thumbnail_locked') }}"
                                                                    alt="{{ video.title }}"
                                                                    class="video-thumbnail img-fluid img-tendance">
                                                                <i class="fa-solid fa-lock lock fa-2xl position-absolute"></i>
                                                            </a>
                                                        {% else %}
                                                            <img
                                                                src="{{ (image_dir ~ '/' ~ video.image ) | imagine_filter('thumbnail_locked') }}"
                                                                alt="{{ video.title }}"
                                                                class="video-thumbnail img-fluid">
                                                        {% endif %}
                                                    </div>
                                                    <div class="card-body">
                                                        <h3 class="card-title">{{ video.title }}</h3>
                                                    </div>
                                                </div>
                                            {% endfor %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}
    {% endfor %}
    {% for video in sortedVideos %}
        {% if not video.Private or app.user %}
        <div class="modal" id="myModal{{ video.id }}">
            <div class="modal-dialog modal-fullscreen">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title">{{video.title}}</h3>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <video  id="modal-player-video-{{ video.id }}" class="video-js videoPlayer" controls>
                            <source src="{{ video_dir ~ '/' ~ video.videoUrl }}" alt="VidÃ©o {{ video.title }}" type="video/mp4">
                        </video>
                        <h3>Titre : {{ video.title }}</h3>
                        <a href="{{ path('add_like', {id: video.id}) }}">Aimer la video</a>
                        <a href="{{ path('add_bookmark', {id: video.id}) }}">Mettre en favoris</a>
                        {{ video.description | raw }}
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    {% endfor %}
    {% include 'home/category.html.twig' %}
{% endblock %}
